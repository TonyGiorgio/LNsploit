use tui::{
    layout::{Constraint, Direction, Layout, Rect},
    text::Text,
    widgets::{Block, Borders, Paragraph, Wrap},
};

use crate::{
    router::NodeSubLocation,
    widgets::{
        constants::{green, white, yellow},
        draw::draw_selectable_list,
    },
};

use super::ScreenFrame;

pub const EXPLOIT_ACTION_MENU: [&str; 1] = ["Broadcast LND <=0.15.1 large script tx"];

pub fn draw_exploits(
    frame: &mut ScreenFrame,
    chunk: Rect,
    highlight_state: (bool, bool),
    menu_index: Option<usize>,
) {
    let vertical_chunks = Layout::default()
        .direction(Direction::Vertical)
        .constraints([Constraint::Percentage(50), Constraint::Percentage(50)].as_ref())
        .split(chunk);
    let text = Text::from("May you do good and not evil

May you find forgiveness for yourself and forgive others

May you share freely, never taking more than you give

Assume nothing works, and you may be pleasantly surprised; and when it breaks, you get to keep both pieces.");

    let block = Paragraph::new(text)
        .style(white())
        .block(Block::default())
        .wrap(Wrap { trim: false })
        .block(
            Block::default()
                .title("Exploit View")
                .borders(Borders::ALL)
                .border_style(white()),
        );

    frame.render_widget(block, vertical_chunks[0]);
    draw_selectable_list(
        frame,
        vertical_chunks[1],
        "Exploits",
        &EXPLOIT_ACTION_MENU,
        highlight_state,
        menu_index,
    );
}
